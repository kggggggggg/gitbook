# Flutter的状态管理

# 声名式编程框架

声名式编程框架（Declarative Programming Framework）是一种编程范式，其中程序的逻辑和行为是通过声明式的方式来描述，而不是通过编写详细的控制流程和状态变化的命令式代码。

在声名式编程框架中，开发人员主要关注程序的"是什么"而不是"如何"，即描述程序的目标和所需的结果，而不是详细说明如何达到这些结果。通过声明式的方式，开发人员描述程序的期望状态和逻辑，由框架或运行时环境负责处理具体的执行流程。

声名式编程框架的优点包括：

1. 简洁性：通过声明式的方式，可以更清晰、简洁地表达程序的意图和目标，减少冗余和重复的代码。

2. 可读性：声名式代码更易于阅读和理解，因为它强调程序的目标和意图，而不是详细的执行流程。

3. 可维护性：声名式代码通常更易于维护，因为它减少了复杂的控制流程和状态变化的代码，使代码更模块化和可组合。

4. 可扩展性：通过将程序的逻辑和行为以声明式的方式描述，声名式编程框架提供了更灵活和可扩展的方式来修改和扩展程序。

在Flutter中，开发人员使用声明式语法来描述数据与界面的关联关系。通过在组件中使用插值表达式、属性传递和回调函数，开发人员可以将数据动态地绑定到界面上。当数据发生变化时，Flutter会自动重新构建相关的组件以反映最新的数据。

总之，声名式编程框架是一种通过声明式的方式描述程序的目标和结果的编程范式。它提供了简洁、可读、可维护和可扩展的代码编写方式，使开发人员能够更聚焦于程序的逻辑而不是具体的控制流程。



> 声名式框架使用声明式语法来描述数据与界面的关系。当数据发生变化时，Flutter会自动重新构建相关的组件以反映最新的数据。



#  Q1 什么是状态

> Flutter中的状态是指应用程序中的数据，可以是用户输入、网络请求结果、应用程序配置等等。
>
> 比如当前使用的主题，语言



# Q2 state和状态是什么关系

> Flutter 应用是 **声明式** 的，这也就意味着 Flutter 构建的用户界面就是应用的当前状态。

![A mathematical formula of UI = f(state). 'UI' is the layout on the screen. 'f' is your build methods. 'state' is the application state.](https://flutter.cn/assets/images/docs/development/data-and-backend/state-mgmt/ui-equals-function-of-state.png)



# Q3为什么需要状态管理

> 状态管理的目的是确保应用程序在不同组件之间共享和同步状态的变化。



# Q4如果没有状态管理

如果在Flutter应用程序中不使用适当的状态管理解决方案，可能会导致数据共享困难、组件之间通信问题以及难以追踪和管理状态变化。这些问题可能导致代码冗余、维护困难和潜在的错误。因此，选择适当的状态管理解决方案可以提高代码的可维护性和可扩展性，以及改善应用程序的用户体验。

> 比如购物车功能，如果通过一层一层的回调方法来进行数据传递，将会有数据共享困难、数据流变得模糊、代码冗余等问题。



# Q4状态管理包

Provider



Redux



BLoC



GetX

# Q5EvenBus

Flutter EventBus（事件总线）并不是严格意义上的状态管理解决方案，而是一种用于在组件之间进行事件通信的机制。它可以作为一种辅助工具来处理组件之间的解耦和通信需求，但与常见的状态管理解决方案（如Provider、GetX、BLoC等）相比，它更专注于事件的发布和订阅。

事件总线模式是一种发布/订阅模式，通过事件的发布和订阅，组件可以在不直接依赖彼此的情况下进行通信。通过事件总线，一个组件可以发送事件，而其他组件可以订阅并接收这些事件，并做出相应的响应。

在Flutter中，可以使用第三方库或自定义实现的事件总线来实现这种通信模式。例如，常见的Flutter事件总线库包括event_bus和flutter_bloc等。

尽管Flutter EventBus可以在一定程度上解决组件之间的通信需求，但它并没有提供集中式的状态管理和状态变更的机制。状态管理解决方案通常提供一种管理应用程序状态的机制，可以集中处理状态的变化、跟踪状态的变化历史，并提供一种响应式的方式来更新组件的UI。

综上所述，虽然Flutter EventBus（事件总线）可以辅助组件之间的通信，但它不是严格的状态管理解决方案。在大多数情况下，使用专门的状态管理库可以更好地管理和响应应用程序的状态变化。





[状态 (State) 管理介绍](https://flutter.cn/docs/data-and-backend/state-mgmt/intro)

